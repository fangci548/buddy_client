<!DOCTYPE html>
<ion-header>
  <ion-toolbar>
    <!-- <ion-title>message</ion-title> -->
    <a (click)="goback()" style="color: #606c70">
      <ion-icon name="return-down-back-outline" style="width: 30px; height: 30px;"></ion-icon>
      BACK
    </a>
    <a style="color: #606c70; float: right; margin-right: 3%;">
      <ion-icon name="ellipsis-horizontal" style="width: 30px; height: 30px;"></ion-icon>
    </a>
  </ion-toolbar>
</ion-header>

<ion-content>

  <ion-card  style="margin-top: 10px;" (click)="openModal()">
    <ion-item style="--border-style:none;">
      <ion-avatar style="width: 50px; height: 50px;">
        <img src="https://picsum.photos/100/100?random= + '{{case.id}}5'">
      </ion-avatar>
      <ion-label>
        {{case.userName}}
        <p style="float: right;">2小時前</p>

      </ion-label>
    </ion-item>
    <ion-badge class="hashtag">
      {{case.hashtag}}
    </ion-badge>

    <ion-card-content>
      {{case.content}}
    </ion-card-content>

    <div style="position: absolute; bottom: 0%; left: 2%;">
      <p>10個人收藏，2人詢問中...</p>
    </div>

    <div style="position: absolute; bottom: 2%; right: 2%;">
      <ion-icon name="heart-outline" style="width: 25px; height: 25px; margin-right: 10px; color: #f58898"></ion-icon>
      <ion-icon name="paper-plane-outline" style="width: 25px; height: 25px; margin-right: 5px;"></ion-icon>
    </div>

  </ion-card>
  <div class="dialogue" style="margin-top: 10px;">

    <ion-row *ngFor="let message of messages | async">
      <ion-col size="9" class="user" [offset]="message.myMsg ? 3 : 0"
        [ngClass]="{'local': message.myMsg,'remote': !message.myMsg}">
      <div class="avatar">
        <div class="pic">
          <script>console.log(message.msg+message.myMsg)</script>
          <!-- <img src="{{message.myMsg?'https://picsum.photos/id/69/100/100':'https://picsum.photos/100/100?random=12'}}" /> -->
          <img *ngIf="message.myMsg" src='https://picsum.photos/id/69/100/100' />
          <img *ngIf="!message.myMsg" src="https://picsum.photos/100/100?random= + '{{case.id}}5'" />
        </div>
      </div>
<!--        <b class="fromName">{{ message.fromName }}</b><br>-->
        <div class="text">{{ message.msg }}<br>{{ message.createdAt?.toMillis() | date:'short' }}</div>
<!--        <div ><br>{{ message.createdAt?.toMillis() | date:'short' }}</div>-->
      </ion-col>

    </ion-row>

  </div>
  <!-- <div class="dialogue" style="margin-top: 10px;">
    <div class="user remote">
      <div class="avatar">
        <div class="pic">
          <img src="https://picsum.photos/100/100?random=12" />
        </div>
      </div>
      <div class="text">我現在是資工系碩士生</div>
    </div>
    <div class="user local">
      <div class="avatar">
        <div class="pic">
          <img src="https://picsum.photos/id/69/100/100">
        </div>
      </div>
      <div class="text">太棒了!我就想找資工系的學生</div>
    </div>
    <div class="user remote">
      <div class="avatar">
        <div class="pic">
          <img src="https://picsum.photos/100/100?random=12" />
        </div>
      </div>
      <div class="text">請問你有基礎嗎？</div>
    </div>
    <div class="user remote">
      <div class="avatar">
        <div class="pic">
          <img src="https://picsum.photos/100/100?random=12" />
        </div>
      </div>
      <div class="text">有沒有學過程式語言呢？</div>
    </div>
    <div class="user local">
      <div class="avatar">
        <div class="pic">
          <img src="https://picsum.photos/id/69/100/100">
        </div>
      </div>
      <div class="text">我有使用過基礎C語言，能夠寫出簡單的程式</div>
    </div>
  </div> -->

  <ion-footer>
    <ion-toolbar color=#606c70>
      <!-- <ion-row class="ion-align-items-center">
        <ion-col size="11">
          <ion-textarea placeholder="輸入文字" autoGrow="true" class="message-input" rows="1" maxLength="500"
            [(ngModel)]="newMsg">
          </ion-textarea>
        </ion-col>
        <ion-col size="1">
          <!-- <ion-icon name="paper-plane-outline"></ion-icon>expand="block" fill="clear" color="primary"class="msg-btn" -->

        <!-- </ion-col>
      </ion-row> -->
      <ion-item class="input">
        <ion-input placeholder="輸入文字" autoGrow="true" class="message-input" rows="1" maxLength="500"
          [(ngModel)]="newMsg"></ion-input>
        <ion-button  [disabled]="newMsg === ''"
            (click)="sendMessage()">
            <ion-icon name="paper-plane-outline" slot="icon-only"></ion-icon>
          </ion-button>
          <!-- <ion-icon name="paper-plane-outline"></ion-icon> -->
      </ion-item>
    </ion-toolbar>
  </ion-footer>

  <!-- <ion-item class="input">
    <ion-input placeholder="輸入文字" ></ion-input>
    <ion-icon name="paper-plane-outline"></ion-icon>
  </ion-item> -->
</ion-content>
